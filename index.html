<!doctype html>
<html lang="en">
<head>
	<title>Nexporify - Music Intelligence Through Art</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Export and save your Spotify playlists to csv. Analyze your music tastes with beautiful data visualizations. Data fields include genres, artists, popularity, year and more.">
	
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="canonical" href="https://exportify.net">
	
	<!-- Google Fonts - Inter Variable -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

	<!-- React.js -->
	<script src="//unpkg.com/react@16/umd/react.production.min.js"></script>
	<script src="//unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>

	<!-- IO utils -->
	<script src="FileSaver.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>

	<!-- Styles -->
	<link rel="stylesheet" href="styles/artistic-theme.css">
	
	<!-- Scripts -->
	<script src="exportify.js"></script>
</head>

<body>
	<!-- Abstract Background Shapes -->
	<div class="abstract-shape shape-1"></div>
	<div class="abstract-shape shape-2"></div>
	<div class="abstract-shape shape-3"></div>

	<!-- Sticky Header (appears on scroll) -->
	<header class="main-header" id="mainHeader">
		<div class="header-content">
			<a href="https://github.com/visheshvs/exportify" class="logo">Nexporify</a>
			<div id="logoutContainer"></div>
		</div>
	</header>

	<!-- Hero Section -->
	<section class="hero-section" id="heroSection">
		<div class="hero-background"></div>
		<div class="hero-content">
			<h1 class="hero-title">Explore Music<br/>Through Data</h1>
			<p class="hero-subtitle" id="subtitle">Analyze, visualize, and export Spotify playlists</p>
			<div id="exploreButtonContainer" style="display: none; margin-top: var(--space-lg);margin-bottom: var(--space-lg);">
				<button id="exploreButton" class="btn btn-primary" onclick="document.getElementById('playlistsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' })">
					Explore
				</button>
			</div>
			
			<div class="hero-description">
				<p class="hero-description-text">
					Nexporify allows you to export Spotify playlist metadata and explore the data through 
					data analysis and visualizations. Get insight into your listening patterns, genre distribution, 
					and audio characteristics using Spotify’s Web API.
				</p>
				
				<div class="hero-features">
					<div class="hero-feature">
						<h3>Export Playlist Data</h3>
						<p>Download your playlists as CSV files with comprehensive metadata including track information, 
						artist details, release dates, popularity metrics, and audio features.</p>
					</div>
					<div class="hero-feature">
						<h3>Audio Features Analysis</h3>
						<p>Explore  audio characteristics using Spotify's Web API data, including danceability, 
						energy, valence, tempo, key, mode, and more. Learn more about 
						<a href="https://developer.spotify.com/documentation/web-api/reference/get-audio-features" target="_blank" rel="noopener">audio features</a>.</p>
					</div>
					<div class="hero-feature">
						<h3>Data Visualizations</h3>
						<p>View playlist data through visual representations designed to highlight patterns and relationships. 
						Charts and visual layouts focus on clarity while presenting music data in a structured, exploratory format.</p>
					</div>
				</div>
				
				<div class="hero-how-to">
					<h3>Choose Your Path</h3>
					<div class="usage-options">
						<div class="usage-option advanced-path">
							<h4>Advanced Analysis</h4>
							<p class="path-subtitle">Full Data</p>
							<p class="path-description">Complete audio features including danceability, energy, tempo, mood analysis, and more</p>
							<ol class="hero-steps">
								<li>Go to <a href="https://exportify.net" target="_blank" rel="noopener">exportify.net</a></li>
								<li>Sign in with Spotify and export your playlist as CSV</li>
								<li>Upload the CSV file below for detailed analysis</li>
							</ol>
							<p class="path-note">Includes all audio features and detailed insights</p>
						</div>
						<div class="usage-option simple-path">
							<h4>Simple Analysis</h4>
							<p class="path-subtitle">Quick Start</p>
							<p class="path-description">Basic insights: genres, artists, release dates, and popularity</p>
							<ol class="hero-steps">
								<li>Sign in with Spotify using the button below</li>
								<li>Browse your playlists</li>
								<li>Click "Analyze" for instant basic insights</li>
							</ol>
							<p class="path-note">Faster, no export needed, works right away</p>
						</div>
					</div>
				</div>
				
				<div id="heroActions" class="actions-container">
					<div class="action-column">
						<div class="action-label">Advanced Analysis</div>
						<div class="upload-section">
							<input type="file" accept=".csv" id="csvUploadInput" style="display: none;" />
							<label for="csvUploadInput" class="upload-zone" id="uploadZone">
								<div class="upload-icon">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
										<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
										<polyline points="17 8 12 3 7 8"></polyline>
										<line x1="12" y1="3" x2="12" y2="15"></line>
									</svg>
								</div>
								<div class="upload-text">Upload CSV</div>
								<div class="upload-hint">from exportify.net</div>
							</label>
							<div id="uploadStatus" class="upload-status" style="display: none;"></div>
						</div>
					</div>
					
					<div class="divider-vertical">
						<span>or</span>
					</div>
					
					<div class="action-column">
						<div class="action-label">Simple Analysis</div>
						<button id="loginButton" type="submit" class="btn btn-primary" onclick="utils.authorize()">
							Sign In with Spotify
						</button>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Main Content -->
	<main>
		<!-- Error Messages -->
		<div id="error" class="error-message" style="display: none;"></div>

		<!-- Playlists Container -->
		<div id="playlistsContainer"></div>

	</main>

	<!-- Footer -->
	<footer class="main-footer">
		<div class="footer-content">
			<p class="footer-text">
				<span>Nexporify - Open Source Music Analytics</span>
				<a href="https://github.com/visheshvs/exportify" target="_blank" rel="noopener">View on GitHub</a>
			</p>
			<p class="footer-credit">
				Based on original work by <a href="https://github.com/pavelkomarov/exportify" target="_blank" rel="noopener">pavelkomarov/exportify</a>
			</p>
		</div>
	</footer>

	<script>
		// Show/hide header on scroll
		let lastScroll = 0;
		const header = document.getElementById('mainHeader');
		
		window.addEventListener('scroll', () => {
			const currentScroll = window.pageYOffset;
			if (currentScroll > 100) {
				header.classList.add('visible');
			} else {
				header.classList.remove('visible');
			}
			lastScroll = currentScroll;
		});

		// CSV Upload handling
		function setupCSVUpload() {
			const fileInput = document.getElementById('csvUploadInput');
			const uploadZone = document.getElementById('uploadZone');
			const uploadStatus = document.getElementById('uploadStatus');
			
			if (!fileInput || !uploadZone) return;
			
			// File input change handler
			fileInput.addEventListener('change', function(e) {
				const file = e.target.files[0];
				if (file) {
					handleFileUpload(file);
				}
			});
			
			// Drag and drop handlers
			uploadZone.addEventListener('dragover', function(e) {
				e.preventDefault();
				uploadZone.classList.add('dragover');
			});
			
			uploadZone.addEventListener('dragleave', function(e) {
				e.preventDefault();
				uploadZone.classList.remove('dragover');
			});
			
			uploadZone.addEventListener('drop', function(e) {
				e.preventDefault();
				uploadZone.classList.remove('dragover');
				
				const file = e.dataTransfer.files[0];
				if (file) {
					handleFileUpload(file);
				}
			});
			
			function handleFileUpload(file) {
				// Validate file type
				if (!file.name.toLowerCase().endsWith('.csv')) {
					if (uploadStatus) {
						uploadStatus.className = 'upload-status error';
						uploadStatus.style.display = 'block';
						uploadStatus.textContent = '✗ Please upload a CSV file';
						setTimeout(() => { uploadStatus.style.display = 'none'; }, 3000);
					}
					return;
				}
				
				// Validate file size (10MB limit)
				if (file.size > 10 * 1024 * 1024) {
					if (uploadStatus) {
						uploadStatus.className = 'upload-status error';
						uploadStatus.style.display = 'block';
						uploadStatus.textContent = '✗ File too large. Maximum size is 10MB';
						setTimeout(() => { uploadStatus.style.display = 'none'; }, 3000);
					}
					return;
				}
				
				// Process the file
				PlaylistExporter.analyzeFromUpload(file);
			}
		}
		
		// Update subtitle when playlists load
		const originalOnload = window.onload;
		window.onload = async function() {
			if (originalOnload) await originalOnload();
			
			// Setup CSV upload after page loads
			setupCSVUpload();
		};
	</script>
</body>
</html>
